{{- /* Helper template definitions */ -}}

{{- define "timeout_option" -}}
if {{.OptionsVar}}.{{.Field}} == 0 {
	{{.OptionsVar}}.{{.Field}} = {{Time "Duration"}}({{.Value}}) * {{Time "Second"}}
}
{{- end -}}

{{- define "retry_policy" -}}
if {{.OptionsVar}}.RetryPolicy == nil {
	{{.OptionsVar}}.RetryPolicy = &{{Temporal "RetryPolicy"}}{
		{{- if .Policy.InitialInterval}}
		InitialInterval: {{Time "Duration"}}({{toSeconds .Policy.InitialInterval}}) * {{Time "Second"}},
		{{- end}}
		{{- if .Policy.MaximumInterval}}
		MaximumInterval: {{Time "Duration"}}({{toSeconds .Policy.MaximumInterval}}) * {{Time "Second"}},
		{{- end}}
		{{- if .Policy.BackoffCoefficient}}
		BackoffCoefficient: {{.Policy.BackoffCoefficient}},
		{{- end}}
		{{- if .Policy.MaximumAttempts}}
		MaximumAttempts: {{.Policy.MaximumAttempts}},
		{{- end}}
		{{- if .Policy.NonRetryableErrorTypes}}
		NonRetryableErrorTypes: []string{
			{{- range .Policy.NonRetryableErrorTypes}}
			{{Quote .}},
			{{- end}}
		},
		{{- end}}
	}
}
{{- end -}}
